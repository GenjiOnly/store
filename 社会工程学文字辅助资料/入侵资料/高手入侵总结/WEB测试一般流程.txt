个人渗透的一般流程总结

From:www.3est.com
Author:Tsingx

写在前面：
本文没有图，纯理论上做总结，2k字左右，不多，大家耐心点
入侵存在运气的几率，我们只有不断的提高自己，才能够将运气的成分将到最小；
方法是死的，人是活的，思路更是活的。

我就算是抛砖引玉了，说一下我渗透的思路大家可以多多指正。

开始渗透
现在我们假定要渗透www.xxx.com
我们首先要观察，
观察网站的类型，这一步不是让你马上有漏洞什么的，而是做到对网站心中有数。
大概有这么几种可能
1、一眼望去基本全是flash的，看到这个信息，就要做好打持久战的准备了，此时可以用wvs扫一下站点目录，了解站点结构，还有就是扫描ftp弱口令，因为这种flash站很依靠ftp。有时候会遇到非常弱智的密码。

2、首页可以看到大批链接，链接是html。shtml，htm之类的静态链接的，就应该考虑可能是静态模板制作的，你就要在网站上仔细找powered by，只要找到了，就走两条路，1.Google现有的0day，拿shell的方法，2.到官网下载源码自己寻找信息

3、首页为asp？....php？之类动态+参数的，就自己随手打开一个加上‘和and 1=1查询注入，如果弹框出来，有人就可能放弃了，实际上应该庆幸，尤其是asp的，应为这很有可能是站长直接include的现成防注入程序，那么肯定有数据库（记录你的ip之类的信息），有人可能会问了，有数据库有什么用？难道去下载吗？no，这种数据库一般都是asp的，可以一句话，直接在注入代码里插入一句话，然后链接他的数据库，而且80%的网站防注入数据库都是根目录下的sqlin.asp
回过来，如果不谈框而直接跳转的话就比较麻烦了，可以手工试一下绕过代码，还有就是用中转注入，详见http://forum.3est.com/thread-2418-1-1.html

4、首页链接基本是xxx.asp，xxx.php之类的，没有参数，那说明还是静态模板生成的伪静态页面，只不过是动态后缀，还是按2的思路走，需要注意一点的就是有一些地方性网站是一个区域内都用的一个cms。而且这些cms只是小规模使用，没有现成的源码，可以把特殊路径（如/news /news_view.asp）放到谷歌了搜索，在通过其他站点旁注拿源码

5、这最后一种也是最棘手的，就是全站翻来翻去就几个静态页面，这很可能是某些bt站长做的bt站，全本地编写，ftp上传，很可能连后台都没有，以前看过用些展览性的网站就是这样的，这样的网站一般是迂回入侵。
接下来很重要的一点就是，无论什么站，都不要放弃尝试，这很重要

按上面的种类来

第一种：
手工尝试一下高危目录，以前百度一个分站后台都被爆出是admin/index.asp，如果懒一点的话可以用wwwscan，论坛工具版里有gui的，如果扫到了管理目录啥的，可以直接试弱口令和社工，如果不行，就开始旁注。
在这里我说一下我的旁注思路
我用的工具是明小子，很简单，因为他有批量检测
旁注地址出来之后先检查上传，然后就是后台，数据库可以视情况手工检测，节约时间。但是工具越来越不好用了，所以在旁站比较少的时候可以一个一个手工看，如果旁站多的话，可以观察域名，比如带gov.cn的，***hotel的，**hg(化工)，**pj(配件)这些公司站点，小地方政府站都非常容易入侵
如果上传没有，很重要的一步来了，检测后台，其实不要以为没有注入后台就没用，只要有后台，先or=or后admin，admin，还有admin，域名，就这3个绝对屡试不爽
继续说思路，如果旁注出来拿到shell，首先看目录能不能跳转，如果不能，而且目录十分有序的，八成是虚拟主机，可以喊几个人一起猜，结合社工信息猜，几率很大，还有不要忘记aspx里面的iis spy
如果以上都不行，那么就拿cnsuperscan，扫80吧，看一下像不像内网机组，如果c段存活主机多，考虑一下扫21，很可能是大型公司，扫完21专拣survu的干，方便提权
内网简单说一下。
1、cain+玫瑰的arp工具，用两个机子一起猛嗅，让后自己睡觉去等着
2、抓全内网的http信息，找一些账号和社工联系起来
内网渗透的事就不废话了，太长了...！

第二种：
这个很简单了。静态模板，如果是站长自己写的源码，vulnerabilityscanner6扫把，我的经验是只要站张没用现成的源码，那自己肯定留得有后门，而且很容易犯低级错误，扫到可能注入的页面了就试吧，最好是能扫到上传，还有就是不要忘记前辈们的脚步。看看1.asp，mm.asp等待，不行的话就重复第一种的思路

第三种、第四种：
找版权。找信息，找弱点，其它的就沿着第二种到第一种的思路吧

第五种：
这种站特别难拿，主要还是用个强悍的字典扫目录，找程序员留下的上传点之类的，有时候可以试一下upload1.asp这样的路径，还有就是二级目录没有index时可以列文件。不过这种站一般还是要走第一种的路

写在最后：
上面的思路如果用好了我想拿下一个普通站应该是可以的，不过这只是通用的思路，主要还是要多看别人写的入侵经验，因为漏洞是怎么也说不完的，比如我以上写的思路很多常用的漏洞的尝试并没有写进去，比如xss，但是如果用xss那站一定是一个漫长的过程，记得一前看别人写的渗透清华大学，就是捡的分站日，而且是用一个列目录的漏洞，然后找到了一个数据库管理目录拿到一句话的，再次说一遍，思路不是死的
 